# Lumen Technical Architecture Document

## Table of Contents

- [Lumen Technical Architecture Document](#table-of-contents)
  - [Table of Contents](./table-of-contents.md)
  - [1. Introduction](./1-introduction.md)
    - [Purpose & Scope](./1-introduction.md#purpose-scope)
    - [Document Conventions](./1-introduction.md#document-conventions)
    - [Relationship to Other Documents](./1-introduction.md#relationship-to-other-documents)
    - [Revision History](./1-introduction.md#revision-history)
  - [2. High-Level Architecture](./2-high-level-architecture.md)
    - [System Overview](./2-high-level-architecture.md#system-overview)
    - [Repository Structure](./2-high-level-architecture.md#repository-structure)
    - [AppState Critical Path](./2-high-level-architecture.md#appstate-critical-path)
    - [Signal Flow](./2-high-level-architecture.md#signal-flow)
  - [3. Tech Stack](./3-tech-stack.md)
    - [Technology Table](./3-tech-stack.md#technology-table)
    - [Rationale for Key Choices](./3-tech-stack.md#rationale-for-key-choices)
  - [4. Data Models](./4-data-models.md)
    - [ColumnMapping](./4-data-models.md#columnmapping)
    - [FilterCriteria](./4-data-models.md#filtercriteria)
    - [TradingMetrics](./4-data-models.md#tradingmetrics)
    - [AppState](./4-data-models.md#appstate)
    - [WindowState](./4-data-models.md#windowstate)
    - [Constants](./4-data-models.md#constants)
  - [5. Components](./5-components.md)
    - [UI Components](./5-components.md#ui-components)
      - [MetricCard](./5-components.md#metriccard)
      - [ComparisonRibbon](./5-components.md#comparisonribbon)
      - [FilterChip](./5-components.md#filterchip)
      - [ToggleSwitch](./5-components.md#toggleswitch)
      - [DataGrid](./5-components.md#datagrid)
      - [ChartCanvas](./5-components.md#chartcanvas)
      - [Toast](./5-components.md#toast)
      - [EmptyState](./5-components.md#emptystate)
    - [Core Components](./5-components.md#core-components)
      - [FileLoader](./5-components.md#fileloader)
      - [ColumnMapper](./5-components.md#columnmapper)
      - [FirstTriggerEngine](./5-components.md#firsttriggerengine)
      - [FilterEngine](./5-components.md#filterengine)
      - [MetricsCalculator](./5-components.md#metricscalculator)
      - [EquityCalculator](./5-components.md#equitycalculator)
      - [ExportManager](./5-components.md#exportmanager)
      - [CacheManager](./5-components.md#cachemanager)
  - [6. Core Workflows](./6-core-workflows.md)
    - [Workflow 1: File Load → First Trigger → Baseline](./6-core-workflows.md#workflow-1-file-load-first-trigger-baseline)
    - [Workflow 2: Filter Apply → Metrics Update](./6-core-workflows.md#workflow-2-filter-apply-metrics-update)
    - [Workflow 3: First-Trigger Toggle](./6-core-workflows.md#workflow-3-first-trigger-toggle)
    - [Workflow 4: Export](./6-core-workflows.md#workflow-4-export)
    - [Workflow 5: Window State Restore](./6-core-workflows.md#workflow-5-window-state-restore)
  - [7. Development Workflow](./7-development-workflow.md)
    - [Environment Setup](./7-development-workflow.md#environment-setup)
    - [pyproject.toml](./7-development-workflow.md#pyprojecttoml)
    - [Makefile](./7-development-workflow.md#makefile)
    - [VS Code Configuration](./7-development-workflow.md#vs-code-configuration)
    - [Pre-commit Configuration](./7-development-workflow.md#pre-commit-configuration)
    - [GitHub Actions CI](./7-development-workflow.md#github-actions-ci)
  - [8. Testing Strategy](./8-testing-strategy.md)
    - [Test Pyramid](./8-testing-strategy.md#test-pyramid)
    - [Fixtures (conftest.py)](./8-testing-strategy.md#fixtures-conftestpy)
    - [Unit Tests](./8-testing-strategy.md#unit-tests)
    - [Widget Tests](./8-testing-strategy.md#widget-tests)
    - [Integration Tests](./8-testing-strategy.md#integration-tests)
    - [Manual Testing Checklist](./8-testing-strategy.md#manual-testing-checklist)
  - [9. Coding Standards](./9-coding-standards.md)
    - [Language & Formatting](./9-coding-standards.md#language-formatting)
    - [Naming Conventions](./9-coding-standards.md#naming-conventions)
    - [Type Hints](./9-coding-standards.md#type-hints)
    - [Qt Patterns](./9-coding-standards.md#qt-patterns)
    - [Pandas Patterns](./9-coding-standards.md#pandas-patterns)
    - [Exception Hierarchy](./9-coding-standards.md#exception-hierarchy)
    - [Theme Constants](./9-coding-standards.md#theme-constants)
    - [Logging Guidelines](./9-coding-standards.md#logging-guidelines)
  - [10. Error Handling & Resilience](./10-error-handling-resilience.md)
    - [Philosophy](./10-error-handling-resilience.md#philosophy)
    - [Exception Layers](./10-error-handling-resilience.md#exception-layers)
    - [Error Messages](./10-error-handling-resilience.md#error-messages)
    - [Graceful Degradation](./10-error-handling-resilience.md#graceful-degradation)
    - [State Recovery](./10-error-handling-resilience.md#state-recovery)
    - [Tab Navigation Guards](./10-error-handling-resilience.md#tab-navigation-guards)
    - [Global Exception Handler](./10-error-handling-resilience.md#global-exception-handler)
    - [Font Loading with Fallback](./10-error-handling-resilience.md#font-loading-with-fallback)
  - [11. Build & Distribution](./11-build-distribution.md)
    - [PyInstaller Configuration](./11-build-distribution.md#pyinstaller-configuration)
    - [Build Commands](./11-build-distribution.md#build-commands)
    - [Version Management](./11-build-distribution.md#version-management)
    - [Distribution Checklist](./11-build-distribution.md#distribution-checklist)
  - [12. Operational Considerations](./12-operational-considerations.md)
    - [Logging Configuration](./12-operational-considerations.md#logging-configuration)
    - [Crash Reporting](./12-operational-considerations.md#crash-reporting)
    - [User Data Locations](./12-operational-considerations.md#user-data-locations)
    - [Performance Monitoring (Development)](./12-operational-considerations.md#performance-monitoring-development)
  - [Appendix: Requirements Traceability](./appendix-requirements-traceability.md)
