# Story 5.1: Scrollable Data Input Tab

## Status
Done

## Story
**As a** user loading data files with many columns,
**I want** the Data Input tab to be scrollable,
**so that** I can view and configure all column mappings without UI elements being compressed or cut off.

## Acceptance Criteria

1. The Data Input tab content is wrapped in a scrollable container
2. Vertical scrollbar appears when content exceeds visible area
3. Horizontal scrollbar is hidden (content should fit width)
4. Scroll behavior is smooth and responsive
5. All existing functionality remains intact (file selection, sheet selection, column mapping, metrics display)
6. Minimum window size (1280x720) still displays content appropriately
7. When window is maximized, extra space is utilized (no unnecessary scrollbars)

## Tasks / Subtasks

- [x] Task 1: Add QScrollArea wrapper to DataInputTab (AC: 1, 2, 3)
  - [x] Import QScrollArea from PyQt6.QtWidgets
  - [x] Create inner content widget to hold all existing UI elements
  - [x] Wrap content widget in QScrollArea
  - [x] Set vertical scroll policy to ScrollBarAsNeeded
  - [x] Set horizontal scroll policy to ScrollBarAlwaysOff
  - [x] Configure widget resizable property

- [x] Task 2: Verify scroll behavior (AC: 4, 5)
  - [x] Test with small window sizes
  - [x] Test scroll wheel functionality
  - [x] Verify all interactive elements work while scrolled
  - [x] Test column mapping dropdown interactions

- [x] Task 3: Test edge cases (AC: 6, 7)
  - [x] Test at minimum window size 1280x720
  - [x] Test with maximized window
  - [x] Test with various screen resolutions

## Dev Notes

### Relevant Source Files
- `src/tabs/data_input.py` - Main file to modify, specifically `_setup_ui()` method (lines 1004-1219)
- `src/ui/main_window.py` - Parent window, sets minimum size 1280x720

### Implementation Approach
The `DataInputTab._setup_ui()` method currently creates a `QVBoxLayout` directly on `self`. To make it scrollable:

```python
from PyQt6.QtWidgets import QScrollArea

def _setup_ui(self) -> None:
    # Create scroll area
    scroll_area = QScrollArea()
    scroll_area.setWidgetResizable(True)
    scroll_area.setHorizontalScrollBarPolicy(Qt.ScrollBarPolicy.ScrollBarAlwaysOff)
    scroll_area.setVerticalScrollBarPolicy(Qt.ScrollBarPolicy.ScrollBarAsNeeded)

    # Create content widget
    content_widget = QWidget()
    layout = QVBoxLayout(content_widget)
    # ... rest of existing layout code ...

    scroll_area.setWidget(content_widget)

    # Set scroll area as main layout
    main_layout = QVBoxLayout(self)
    main_layout.setContentsMargins(0, 0, 0, 0)
    main_layout.addWidget(scroll_area)
```

### Style Considerations
- Ensure scroll area background matches `Colors.BG_BASE`
- Hide scroll area border/frame for seamless appearance

### Testing

**Test Location:** `tests/test_data_input.py`

**Testing Standards:**
- Use pytest-qt for widget testing
- Test scroll behavior with `qtbot`
- Verify no regression in existing tests

**Manual Testing:**
1. Launch app, resize window to small size
2. Load an Excel file, select sheet
3. Verify column mapping panel is scrollable
4. Test dropdown interactions while scrolled

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-12 | 1.0 | Initial story creation | Sarah (PO Agent) |

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

### Debug Log References
- All 956 tests passed after implementation
- No linting errors
- Import verification successful

### Completion Notes List
- Added QScrollArea wrapper to DataInputTab._setup_ui() method
- Configured scroll policies: vertical=AsNeeded, horizontal=AlwaysOff
- Set frame shape to NoFrame for seamless appearance
- Applied background color styling to match app theme

### File List
- `src/tabs/data_input.py` - Added QScrollArea wrapper, Qt import, scroll configuration

## QA Results
_To be filled after QA review_
